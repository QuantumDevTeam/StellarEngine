<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <Import Project="Sdk.props" Sdk="Microsoft.NET.Sdk"/>
    
    <!-- Versions -->
    <Import Project="..\..\..\..\Data\version.props"/>

    <!-- Stellar Configurations -->
    <PropertyGroup>
        <WinSdkVersion Condition="'$(WinSdkVersion)' == ''">10.0.26100.0</WinSdkVersion>
        <UserProfile>$([MSBuild]::GetEnvironmentVariable('USERPROFILE'))</UserProfile>

        <StellarOrchesterSharedDir>$(UserProfile)\.stellar\$(StellarOrchesterVersion)</StellarOrchesterSharedDir>
        <StellarOrchesterIntallationDir>$([System.IO.File]::ReadAllText('$(StellarOrchesterSharedDir)\installation_location.txt').Trim())</StellarOrchesterIntallationDir>
        
        <StellarPrecompiled Condition="'$(StellarPrecompiled)' == ''">false</StellarPrecompiled>
        <StellarOutputType Condition="'$(StellarOutputType)' == ''">Modern</StellarOutputType>
        <StellarProjectName Condition="'$(StellarProjectName)' == ''">$(AssemblyName)</StellarProjectName>

        <StellarVersionFile Condition="'$(StellarVersionFile)' == ''">$(StellarProjectName).stellar.version.txt</StellarVersionFile>
        <StellarProjectConfigurationFile Condition="'$(StellarProjectConfigurationFile)' == ''">$(StellarProjectName).stellar.project</StellarProjectConfigurationFile>

        <StellarRuntimeConfigType Condition="'$(StellarRuntimeConfigType)' == ''">External</StellarRuntimeConfigType>
        <StellarLocalizationIndexType Condition="'$(StellarLocalizationIndexType)' == ''">External</StellarLocalizationIndexType>
    </PropertyGroup>
    <ItemGroup>
    </ItemGroup>

    <!-- Base .NET -->
    <PropertyGroup>
        <TargetFramework>net10.0-windows$(WinSdkVersion)</TargetFramework>
        <PlatformTarget>x64</PlatformTarget>
        <RuntimeIdentifier>win-x64</RuntimeIdentifier>

        <ImplicitUsings>enable</ImplicitUsings>
        <Nullable>enable</Nullable>
        <AllowUnsafeBlocks>true</AllowUnsafeBlocks>

        <!-- build configuration -->
        <Configurations>Debug;Release</Configurations>
        <Platforms>x64</Platforms>

        <!-- Build path configuration -->
        <OutputPath>bin\$(Configuration)</OutputPath>
        <AppendTargetFrameworkToOutputPath>false</AppendTargetFrameworkToOutputPath>
        <AppendRuntimeIdentifierToOutputPath>false</AppendRuntimeIdentifierToOutputPath>
    </PropertyGroup>
    <ItemGroup>
    </ItemGroup>

    <!-- StellarSdkUsage - Game -->
    <PropertyGroup Condition="'$(StellarSdkUsage)' == 'Game'">
        <StellarGameIcon Condition="'$(StellarGameIcon)' == ''">$(StellarProjectName).ico</StellarGameIcon>
        <StellarGameManifest Condition="'$(StellarGameManifest)' == ''">$(StellarProjectName).manifest</StellarGameManifest>

        <ApplicationIcon Condition="Exists('$(StellarGameIcon)')">$(StellarGameIcon)</ApplicationIcon>
        <ApplicationManifest Condition="Exists('$(StellarGameManifest)')">$(StellarGameManifest)</ApplicationManifest>
    </PropertyGroup>
    <ItemGroup Condition="'$(StellarSdkUsage)' == 'Game' and '$(StellarPrecompiled)' == false">
        <ProjectReference Include="../../../../Engine/src/Stellar.Engine/Stellar.Engine.csproj"/>
    </ItemGroup>
    <ItemGroup Condition="'$(StellarSdkUsage)' == 'Game' and '$(StellarPrecompiled)' == true">
        <PackageReference Include="Stellar.Engine" Version="$(StellarEngineVersion)"/>
    </ItemGroup>

    <!-- StellarSdkUsage - Module -->
    <PropertyGroup Condition="'$(StellarSdkUsage)' == 'Module'">
    </PropertyGroup>
    <ItemGroup Condition="'$(StellarSdkUsage)' == 'Module' and '$(StellarPrecompiled)' == false">
        <ProjectReference Include="../../../../Engine/src/Stellar.Engine/Stellar.Engine.csproj"/>
    </ItemGroup>
    <ItemGroup Condition="'$(StellarSdkUsage)' == 'Module' and '$(StellarPrecompiled)' == true">
        <PackageReference Include="Stellar.Engine" Version="$(StellarEngineVersion)"/>
    </ItemGroup>

    <!-- StellarSdkUsage - EngineModule -->
    <PropertyGroup Condition="'$(StellarSdkUsage)' == 'EngineModule'">
    </PropertyGroup>
    <ItemGroup Condition="'$(StellarSdkUsage)' == 'EngineModule' and '$(StellarPrecompiled)' == false">
        <ProjectReference Include="../../../../Engine/src/Modules/Stellar.Core/Stellar.Core.csproj"/>
    </ItemGroup>
    <ItemGroup Condition="'$(StellarSdkUsage)' == 'EngineModule' and '$(StellarPrecompiled)' == true">
        <PackageReference Include="Stellar.Core" Version="$(StellarEngineVersion)"/>
    </ItemGroup>

    <!-- StellarSdkUsage - EngineCoreModule -->
    <PropertyGroup Condition="'$(StellarSdkUsage)' == 'EngineCoreModule'">
    </PropertyGroup>
    <ItemGroup Condition="'$(StellarSdkUsage)' == 'EngineCoreModule' and '$(StellarPrecompiled)' == false">
    </ItemGroup>
    <ItemGroup Condition="'$(StellarSdkUsage)' == 'EngineCoreModule' and '$(StellarPrecompiled)' == true">
    </ItemGroup>
</Project>